import{aj as u,at as n,ak as i,a4 as d,a3 as _}from"./index-52cd4afa.js";import{G as p}from"./glTFLoader-bae88b97.js";import"./objectModelMapping-c2b6599e.js";const c="KHR_materials_specular";class E{constructor(o){this.name=c,this.order=190,this._loader=o,this.enabled=this._loader.isExtensionUsed(c)}dispose(){this._loader=null}loadMaterialPropertiesAsync(o,r,e){return p.LoadExtensionAsync(o,r,this.name,async(a,s)=>{const l=new Array;return l.push(this._loader.loadMaterialPropertiesAsync(o,r,e)),l.push(this._loadSpecularPropertiesAsync(a,s,e)),s.extensions&&s.extensions.EXT_materials_specular_edge_color&&e instanceof u&&s.extensions.EXT_materials_specular_edge_color.specularEdgeColorEnabled&&(e.brdf.dielectricSpecularModel=n.MATERIAL_DIELECTRIC_SPECULAR_MODEL_OPENPBR,e.brdf.conductorSpecularModel=n.MATERIAL_CONDUCTOR_SPECULAR_MODEL_OPENPBR),await Promise.all(l).then(()=>{})})}_loadSpecularPropertiesAsync(o,r,e){if(!(e instanceof u))throw new Error(`${o}: Material type not supported`);const a=new Array;return r.specularFactor!==void 0&&(e.metallicF0Factor=r.specularFactor),r.specularColorFactor!==void 0&&(e.metallicReflectanceColor=i.FromArray(r.specularColorFactor)),r.specularTexture&&(r.specularTexture.nonColorData=!0,a.push(this._loader.loadTextureInfoAsync(`${o}/specularTexture`,r.specularTexture,s=>{s.name=`${e.name} (Specular)`,e.metallicReflectanceTexture=s,e.useOnlyMetallicFromMetallicReflectanceTexture=!0}))),r.specularColorTexture&&a.push(this._loader.loadTextureInfoAsync(`${o}/specularColorTexture`,r.specularColorTexture,s=>{s.name=`${e.name} (Specular Color)`,e.reflectanceTexture=s})),Promise.all(a).then(()=>{})}}d(c);_(c,!0,t=>new E(t));export{E as KHR_materials_specular};
