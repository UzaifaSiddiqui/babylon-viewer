{
  "version": 3,
  "sources": ["../../tga-js/dist/esm/tga.js"],
  "sourcesContent": ["/**\n * @license tga-js 1.1.1\n * Copyright (c) 2013-2020 Vincent Thibault, Inc.\n * License: MIT\n */\nconst e=0,t=1,a=3,r=9,o=10,i=11,s=0,h=2,n=3,g=4,l=48;export default class{_checkHeader(){const t=this.header;if(t.imageType===e)throw Error(\"No data\");if(t.hasColorMap){if(t.colorMapLength>256||24!==t.colorMapDepth||1!==t.colorMapType)throw Error(\"Invalid colormap for indexed type\")}else if(t.colorMapType)throw Error(\"Why does the image contain a palette ?\");if(!t.width||!t.height)throw Error(\"Invalid image size\");if(8!==t.pixelDepth&&16!==t.pixelDepth&&24!==t.pixelDepth&&32!==t.pixelDepth)throw Error('Invalid pixel size \"'+t.pixelDepth+'\"')}_decodeRLE(e,t,a,r){const o=new Uint8Array(r),i=new Uint8Array(a);let s=0;for(;s<r;){const r=e[t++];let h=1+(127&r);if(128&r){for(let r=0;r<a;++r)i[r]=e[t+r];t+=a;for(let e=0;e<h;++e)o.set(i,s),s+=a}else{h*=a;for(let a=0;a<h;++a)o[s+a]=e[t+a];s+=h,t+=h}}return o}_getImageData8bits(e,t,a,r,o,i,s,h,n,g){for(let l=0,p=o;p!==s;p+=i)for(let o=h;o!==g;o+=n,l++){const i=t[l];e[4*(o+r*p)+3]=255,e[4*(o+r*p)+2]=a[3*i+0],e[4*(o+r*p)+1]=a[3*i+1],e[4*(o+r*p)+0]=a[3*i+2]}return e}_getImageData16bits(e,t,a,r,o,i,s,h,n,g){for(let a=0,l=o;l!==s;l+=i)for(let o=h;o!==g;o+=n,a+=2){const i=t[a+0]|t[a+1]<<8;e[4*(o+r*l)+0]=(31744&i)>>7,e[4*(o+r*l)+1]=(992&i)>>2,e[4*(o+r*l)+2]=(31&i)>>3,e[4*(o+r*l)+3]=32768&i?0:255}return e}_getImageData24bits(e,t,a,r,o,i,s,h,n,g){for(let a=0,l=o;l!==s;l+=i)for(let o=h;o!==g;o+=n,a+=3)e[4*(o+r*l)+3]=255,e[4*(o+r*l)+2]=t[a+0],e[4*(o+r*l)+1]=t[a+1],e[4*(o+r*l)+0]=t[a+2];return e}_getImageData32bits(e,t,a,r,o,i,s,h,n,g){for(let a=0,l=o;l!==s;l+=i)for(let o=h;o!==g;o+=n,a+=4)e[4*(o+r*l)+2]=t[a+0],e[4*(o+r*l)+1]=t[a+1],e[4*(o+r*l)+0]=t[a+2],e[4*(o+r*l)+3]=t[a+3];return e}_getImageDataGrey8bits(e,t,a,r,o,i,s,h,n,g){for(let a=0,l=o;l!==s;l+=i)for(let o=h;o!==g;o+=n,a++){const i=t[a];e[4*(o+r*l)+0]=i,e[4*(o+r*l)+1]=i,e[4*(o+r*l)+2]=i,e[4*(o+r*l)+3]=255}return e}_getImageDataGrey16bits(e,t,a,r,o,i,s,h,n,g){for(let a=0,l=o;l!==s;l+=i)for(let o=h;o!==g;o+=n,a+=2)e[4*(o+r*l)+0]=t[a+0],e[4*(o+r*l)+1]=t[a+0],e[4*(o+r*l)+2]=t[a+0],e[4*(o+r*l)+3]=t[a+1];return e}open(e,t){const a=new XMLHttpRequest;a.responseType=\"arraybuffer\",a.open(\"GET\",e,!0),a.onload=(()=>{200===a.status&&(this.load(new Uint8Array(a.response)),t&&t())}),a.send(null)}load(e){let s=0;if(e.length<18)throw Error(\"Not enough data to contain header\");const h={idLength:e[s++],colorMapType:e[s++],imageType:e[s++],colorMapIndex:e[s++]|e[s++]<<8,colorMapLength:e[s++]|e[s++]<<8,colorMapDepth:e[s++],offsetX:e[s++]|e[s++]<<8,offsetY:e[s++]|e[s++]<<8,width:e[s++]|e[s++]<<8,height:e[s++]|e[s++]<<8,pixelDepth:e[s++],flags:e[s++]};if(h.hasEncoding=h.imageType===r||h.imageType===o||h.imageType===i,h.hasColorMap=h.imageType===r||h.imageType===t,h.isGreyColor=h.imageType===i||h.imageType===a,this.header=h,this._checkHeader(),(s+=h.idLength)>=e.length)throw Error(\"No data\");if(h.hasColorMap){const t=h.colorMapLength*(h.colorMapDepth>>3);this.palette=e.subarray(s,s+t),s+=t}const n=h.pixelDepth>>3,g=h.width*h.height,l=g*n;h.hasEncoding?this.imageData=this._decodeRLE(e,s,n,l):this.imageData=e.subarray(s,s+(h.hasColorMap?g:l))}getImageData(e){const{width:t,height:a,flags:r,pixelDepth:o,isGreyColor:i}=this.header,p=(r&l)>>g;let c,d,m,f,D,y,u;switch(e||(e=document?document.createElement(\"canvas\").getContext(\"2d\").createImageData(t,a):{width:t,height:a,data:new Uint8ClampedArray(t*a*4)}),p===h||p===n?(f=0,D=1,y=a):(f=a-1,D=-1,y=-1),p===h||p===s?(c=0,d=1,m=t):(c=t-1,d=-1,m=-1),o){case 8:u=i?this._getImageDataGrey8bits:this._getImageData8bits;break;case 16:u=i?this._getImageDataGrey16bits:this._getImageData16bits;break;case 24:u=this._getImageData24bits;break;case 32:u=this._getImageData32bits}return u.call(this,e.data,this.imageData,this.palette,t,f,D,y,c,d,m),e}getCanvas(){const{width:e,height:t}=this.header,a=document.createElement(\"canvas\"),r=a.getContext(\"2d\"),o=r.createImageData(e,t);return a.width=e,a.height=t,r.putImageData(this.getImageData(o),0,0),a}getDataURL(e){return this.getCanvas().toDataURL(e||\"image/png\")}}\n"],
  "mappings": "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",
  "names": ["t", "e", "a", "r", "o", "i", "s", "h", "n", "g", "l"]
}
