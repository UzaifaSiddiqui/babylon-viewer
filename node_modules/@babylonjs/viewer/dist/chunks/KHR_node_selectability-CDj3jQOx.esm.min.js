import{bJ as e,bI as o}from"./index-VvGulz6u.esm.min.js";import{e as n}from"./declarationMapper-wc0CNyr2.esm.min.js";import{A as i}from"./objectModelMapping-CghNRpa4.esm.min.js";const t="KHR_node_selectability";n("event/onSelect",t,{blocks:["FlowGraphMeshPickEventBlock","FlowGraphGetVariableBlock","FlowGraphIndexOfBlock","KHR_interactivity/FlowGraphGLTFDataProvider"],configuration:{stopPropagation:{name:"stopPropagation"},nodeIndex:{name:"variable",toBlock:"FlowGraphGetVariableBlock",dataTransformer:e=>["pickedMesh_"+e[0]]}},outputs:{values:{selectedNodeIndex:{name:"index",toBlock:"FlowGraphIndexOfBlock"},controllerIndex:{name:"pointerId"},selectionPoint:{name:"pickedPoint"},selectionRayOrigin:{name:"pickOrigin"}},flows:{out:{name:"done"}}},interBlockConnectors:[{input:"asset",output:"value",inputBlockIndex:0,outputBlockIndex:1,isVariable:!0},{input:"array",output:"nodes",inputBlockIndex:2,outputBlockIndex:3,isVariable:!0},{input:"object",output:"pickedMesh",inputBlockIndex:2,outputBlockIndex:0,isVariable:!0}],extraProcessor(e,o,n,i,t,a,s){const r=t[t.length-1];r.config=r.config||{},r.config.glTF=s;const l=e.configuration?.nodeIndex?.value[0];if(void 0===l||"number"!=typeof l)throw new Error("nodeIndex not found in configuration");const c="pickedMesh_"+l;return t[1].config.variable=c,a._userVariables[c]={className:"Mesh",id:s?.nodes?.[l]._babylonTransformNode?.id,uniqueId:s?.nodes?.[l]._babylonTransformNode?.uniqueId},t}}),i("/nodes/{}/extensions/KHR_node_selectability/selectable",{get:e=>{const o=e._babylonTransformNode;return!o||void 0===o.isPickable||o.isPickable},set:(e,o)=>{o._primitiveBabylonMeshes?.forEach((o=>{o.isPickable=e}))},getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"isPickable"],type:"boolean"});class a{constructor(e){this.name=t,this._loader=e,this.enabled=e.isExtensionUsed(t)}async onReady(){this._loader.gltf.nodes?.forEach((e=>{e.extensions?.KHR_node_selectability&&!1===e.extensions?.KHR_node_selectability.selectable&&e._babylonTransformNode?.getChildMeshes().forEach((e=>{e.isPickable=!1}))}))}dispose(){this._loader=null}}e(t),o(t,!0,(e=>new a(e)));export{a as KHR_node_selectability};
//# sourceMappingURL=KHR_node_selectability-CDj3jQOx.esm.min.js.map
