{"version":3,"file":"flowGraphConsoleLogBlock-ymJa1aY6.esm.js","sources":["../../../../../dev/core/dist/FlowGraph/Blocks/Execution/flowGraphConsoleLogBlock.js"],"sourcesContent":["import { FlowGraphExecutionBlockWithOutSignal } from \"../../flowGraphExecutionBlockWithOutSignal\";\nimport { RichTypeAny } from \"../../flowGraphRichTypes\";\nimport { RegisterClass } from \"../../../Misc/typeStore\";\nimport { Logger } from \"core/Misc/logger\";\n/**\n * Block that logs a message to the console.\n */\nexport class FlowGraphConsoleLogBlock extends FlowGraphExecutionBlockWithOutSignal {\n    constructor(config) {\n        super(config);\n        this.message = this.registerDataInput(\"message\", RichTypeAny);\n        this.logType = this.registerDataInput(\"logType\", RichTypeAny, \"log\");\n        if (config?.messageTemplate) {\n            const matches = this._getTemplateMatches(config.messageTemplate);\n            for (const match of matches) {\n                this.registerDataInput(match, RichTypeAny);\n            }\n        }\n    }\n    /**\n     * @internal\n     */\n    _execute(context) {\n        const typeValue = this.logType.getValue(context);\n        const messageValue = this._getMessageValue(context);\n        if (typeValue === \"warn\") {\n            Logger.Warn(messageValue);\n        }\n        else if (typeValue === \"error\") {\n            Logger.Error(messageValue);\n        }\n        else {\n            Logger.Log(messageValue);\n        }\n        // activate the output flow block\n        this.out._activateSignal(context);\n    }\n    /**\n     * @returns class name of the block.\n     */\n    getClassName() {\n        return \"FlowGraphConsoleLogBlock\" /* FlowGraphBlockNames.ConsoleLog */;\n    }\n    _getMessageValue(context) {\n        if (this.config?.messageTemplate) {\n            let template = this.config.messageTemplate;\n            const matches = this._getTemplateMatches(template);\n            for (const match of matches) {\n                const value = this.getDataInput(match)?.getValue(context);\n                if (value !== undefined) {\n                    // replace all\n                    template = template.replace(new RegExp(`\\\\{${match}\\\\}`, \"g\"), value.toString());\n                }\n            }\n            return template;\n        }\n        else {\n            return this.message.getValue(context);\n        }\n    }\n    _getTemplateMatches(template) {\n        const regex = /\\{([^}]+)\\}/g;\n        const matches = [];\n        let match;\n        while ((match = regex.exec(template)) !== null) {\n            matches.push(match[1]);\n        }\n        return matches;\n    }\n}\nRegisterClass(\"FlowGraphConsoleLogBlock\" /* FlowGraphBlockNames.ConsoleLog */, FlowGraphConsoleLogBlock);\n//# sourceMappingURL=flowGraphConsoleLogBlock.js.map"],"names":[],"mappings":";;;;;AAIA;AACA;AACA;AACO,MAAM,wBAAwB,SAAS,oCAAoC,CAAC;AACnF,IAAI,WAAW,CAAC,MAAM,EAAE;AACxB,QAAQ,KAAK,CAAC,MAAM,CAAC;AACrB,QAAQ,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE,WAAW,CAAC;AACrE,QAAQ,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE,WAAW,EAAE,KAAK,CAAC;AAC5E,QAAQ,IAAI,MAAM,EAAE,eAAe,EAAE;AACrC,YAAY,MAAM,OAAO,GAAG,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,eAAe,CAAC;AAC5E,YAAY,KAAK,MAAM,KAAK,IAAI,OAAO,EAAE;AACzC,gBAAgB,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,WAAW,CAAC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,QAAQ,CAAC,OAAO,EAAE;AACtB,QAAQ,MAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC;AACxD,QAAQ,MAAM,YAAY,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC;AAC3D,QAAQ,IAAI,SAAS,KAAK,MAAM,EAAE;AAClC,YAAY,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;AACrC;AACA,aAAa,IAAI,SAAS,KAAK,OAAO,EAAE;AACxC,YAAY,MAAM,CAAC,KAAK,CAAC,YAAY,CAAC;AACtC;AACA,aAAa;AACb,YAAY,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC;AACpC;AACA;AACA,QAAQ,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,OAAO,CAAC;AACzC;AACA;AACA;AACA;AACA,IAAI,YAAY,GAAG;AACnB,QAAQ,OAAO,0BAA0B;AACzC;AACA,IAAI,gBAAgB,CAAC,OAAO,EAAE;AAC9B,QAAQ,IAAI,IAAI,CAAC,MAAM,EAAE,eAAe,EAAE;AAC1C,YAAY,IAAI,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,eAAe;AACtD,YAAY,MAAM,OAAO,GAAG,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC;AAC9D,YAAY,KAAK,MAAM,KAAK,IAAI,OAAO,EAAE;AACzC,gBAAgB,MAAM,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,EAAE,QAAQ,CAAC,OAAO,CAAC;AACzE,gBAAgB,IAAI,KAAK,KAAK,SAAS,EAAE;AACzC;AACA,oBAAoB,QAAQ,GAAG,QAAQ,CAAC,OAAO,CAAC,IAAI,MAAM,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,KAAK,CAAC,QAAQ,EAAE,CAAC;AACpG;AACA;AACA,YAAY,OAAO,QAAQ;AAC3B;AACA,aAAa;AACb,YAAY,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC;AACjD;AACA;AACA,IAAI,mBAAmB,CAAC,QAAQ,EAAE;AAClC,QAAQ,MAAM,KAAK,GAAG,cAAc;AACpC,QAAQ,MAAM,OAAO,GAAG,EAAE;AAC1B,QAAQ,IAAI,KAAK;AACjB,QAAQ,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAI,EAAE;AACxD,YAAY,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AAClC;AACA,QAAQ,OAAO,OAAO;AACtB;AACA;AACA,aAAa,CAAC,0BAA0B,uCAAuC,wBAAwB,CAAC;;;;"}