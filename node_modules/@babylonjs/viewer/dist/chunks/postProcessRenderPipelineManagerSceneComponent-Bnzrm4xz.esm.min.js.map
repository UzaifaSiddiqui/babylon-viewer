{"version":3,"file":"postProcessRenderPipelineManagerSceneComponent-Bnzrm4xz.esm.min.js","sources":["../../../../../dev/core/dist/PostProcesses/RenderPipeline/postProcessRenderPipelineManager.js","../../../../../dev/core/dist/PostProcesses/RenderPipeline/postProcessRenderPipelineManagerSceneComponent.js"],"sourcesContent":["/**\n * PostProcessRenderPipelineManager class\n * @see https://doc.babylonjs.com/features/featuresDeepDive/postProcesses/postProcessRenderPipeline\n */\nexport class PostProcessRenderPipelineManager {\n    /**\n     * Initializes a PostProcessRenderPipelineManager\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/postProcesses/postProcessRenderPipeline\n     */\n    constructor() {\n        this._renderPipelines = {};\n    }\n    /**\n     * Gets the list of supported render pipelines\n     */\n    get supportedPipelines() {\n        const result = [];\n        for (const renderPipelineName in this._renderPipelines) {\n            if (Object.prototype.hasOwnProperty.call(this._renderPipelines, renderPipelineName)) {\n                const pipeline = this._renderPipelines[renderPipelineName];\n                if (pipeline.isSupported) {\n                    result.push(pipeline);\n                }\n            }\n        }\n        return result;\n    }\n    /**\n     * Adds a pipeline to the manager\n     * @param renderPipeline The pipeline to add\n     */\n    addPipeline(renderPipeline) {\n        this._renderPipelines[renderPipeline._name] = renderPipeline;\n    }\n    /**\n     * Remove the pipeline from the manager\n     * @param renderPipelineName the name of the pipeline to remove\n     */\n    removePipeline(renderPipelineName) {\n        delete this._renderPipelines[renderPipelineName];\n    }\n    /**\n     * Attaches a camera to the pipeline\n     * @param renderPipelineName The name of the pipeline to attach to\n     * @param cameras the camera to attach\n     * @param unique if the camera can be attached multiple times to the pipeline\n     */\n    attachCamerasToRenderPipeline(renderPipelineName, cameras, unique = false) {\n        const renderPipeline = this._renderPipelines[renderPipelineName];\n        if (!renderPipeline) {\n            return;\n        }\n        renderPipeline._attachCameras(cameras, unique);\n    }\n    /**\n     * Detaches a camera from the pipeline\n     * @param renderPipelineName The name of the pipeline to detach from\n     * @param cameras the camera to detach\n     */\n    detachCamerasFromRenderPipeline(renderPipelineName, cameras) {\n        const renderPipeline = this._renderPipelines[renderPipelineName];\n        if (!renderPipeline) {\n            return;\n        }\n        renderPipeline._detachCameras(cameras);\n    }\n    /**\n     * Enables an effect by name on a pipeline\n     * @param renderPipelineName the name of the pipeline to enable the effect in\n     * @param renderEffectName the name of the effect to enable\n     * @param cameras the cameras that the effect should be enabled on\n     */\n    enableEffectInPipeline(renderPipelineName, renderEffectName, cameras) {\n        const renderPipeline = this._renderPipelines[renderPipelineName];\n        if (!renderPipeline) {\n            return;\n        }\n        renderPipeline._enableEffect(renderEffectName, cameras);\n    }\n    /**\n     * Disables an effect by name on a pipeline\n     * @param renderPipelineName the name of the pipeline to disable the effect in\n     * @param renderEffectName the name of the effect to disable\n     * @param cameras the cameras that the effect should be disabled on\n     */\n    disableEffectInPipeline(renderPipelineName, renderEffectName, cameras) {\n        const renderPipeline = this._renderPipelines[renderPipelineName];\n        if (!renderPipeline) {\n            return;\n        }\n        renderPipeline._disableEffect(renderEffectName, cameras);\n    }\n    /**\n     * Updates the state of all contained render pipelines and disposes of any non supported pipelines\n     */\n    update() {\n        for (const renderPipelineName in this._renderPipelines) {\n            if (Object.prototype.hasOwnProperty.call(this._renderPipelines, renderPipelineName)) {\n                const pipeline = this._renderPipelines[renderPipelineName];\n                if (!pipeline.isSupported) {\n                    pipeline.dispose();\n                    delete this._renderPipelines[renderPipelineName];\n                }\n                else {\n                    pipeline._update();\n                }\n            }\n        }\n    }\n    /** @internal */\n    _rebuild() {\n        for (const renderPipelineName in this._renderPipelines) {\n            if (Object.prototype.hasOwnProperty.call(this._renderPipelines, renderPipelineName)) {\n                const pipeline = this._renderPipelines[renderPipelineName];\n                pipeline._rebuild();\n            }\n        }\n    }\n    /**\n     * Disposes of the manager and pipelines\n     */\n    dispose() {\n        for (const renderPipelineName in this._renderPipelines) {\n            if (Object.prototype.hasOwnProperty.call(this._renderPipelines, renderPipelineName)) {\n                const pipeline = this._renderPipelines[renderPipelineName];\n                pipeline.dispose();\n            }\n        }\n    }\n}\n//# sourceMappingURL=postProcessRenderPipelineManager.js.map","import { SceneComponentConstants } from \"../../sceneComponent\";\nimport { PostProcessRenderPipelineManager } from \"./postProcessRenderPipelineManager\";\nimport { Scene } from \"../../scene\";\nObject.defineProperty(Scene.prototype, \"postProcessRenderPipelineManager\", {\n    get: function () {\n        if (!this._postProcessRenderPipelineManager) {\n            // Register the G Buffer component to the scene.\n            let component = this._getComponent(SceneComponentConstants.NAME_POSTPROCESSRENDERPIPELINEMANAGER);\n            if (!component) {\n                component = new PostProcessRenderPipelineManagerSceneComponent(this);\n                this._addComponent(component);\n            }\n            this._postProcessRenderPipelineManager = new PostProcessRenderPipelineManager();\n        }\n        return this._postProcessRenderPipelineManager;\n    },\n    enumerable: true,\n    configurable: true,\n});\n/**\n * Defines the Render Pipeline scene component responsible to rendering pipelines\n */\nexport class PostProcessRenderPipelineManagerSceneComponent {\n    /**\n     * Creates a new instance of the component for the given scene\n     * @param scene Defines the scene to register the component in\n     */\n    constructor(scene) {\n        /**\n         * The component name helpful to identify the component in the list of scene components.\n         */\n        this.name = SceneComponentConstants.NAME_POSTPROCESSRENDERPIPELINEMANAGER;\n        this.scene = scene;\n    }\n    /**\n     * Registers the component in a given scene\n     */\n    register() {\n        this.scene._gatherRenderTargetsStage.registerStep(SceneComponentConstants.STEP_GATHERRENDERTARGETS_POSTPROCESSRENDERPIPELINEMANAGER, this, this._gatherRenderTargets);\n    }\n    /**\n     * Rebuilds the elements related to this component in case of\n     * context lost for instance.\n     */\n    rebuild() {\n        if (this.scene._postProcessRenderPipelineManager) {\n            this.scene._postProcessRenderPipelineManager._rebuild();\n        }\n    }\n    /**\n     * Disposes the component and the associated resources\n     */\n    dispose() {\n        if (this.scene._postProcessRenderPipelineManager) {\n            this.scene._postProcessRenderPipelineManager.dispose();\n        }\n    }\n    _gatherRenderTargets() {\n        if (this.scene._postProcessRenderPipelineManager) {\n            this.scene._postProcessRenderPipelineManager.update();\n        }\n    }\n}\n//# sourceMappingURL=postProcessRenderPipelineManagerSceneComponent.js.map"],"names":["PostProcessRenderPipelineManager","constructor","this","_renderPipelines","supportedPipelines","result","renderPipelineName","Object","prototype","hasOwnProperty","call","pipeline","isSupported","push","addPipeline","renderPipeline","_name","removePipeline","attachCamerasToRenderPipeline","cameras","unique","_attachCameras","detachCamerasFromRenderPipeline","_detachCameras","enableEffectInPipeline","renderEffectName","_enableEffect","disableEffectInPipeline","_disableEffect","update","_update","dispose","_rebuild","defineProperty","Scene","get","_postProcessRenderPipelineManager","component","_getComponent","SceneComponentConstants","NAME_POSTPROCESSRENDERPIPELINEMANAGER","PostProcessRenderPipelineManagerSceneComponent","_addComponent","enumerable","configurable","scene","name","register","_gatherRenderTargetsStage","registerStep","STEP_GATHERRENDERTARGETS_POSTPROCESSRENDERPIPELINEMANAGER","_gatherRenderTargets","rebuild"],"mappings":"uDAIO,MAAMA,EAKT,WAAAC,GACIC,KAAKC,iBAAmB,CAAE,CAClC,CAII,sBAAIC,GACA,MAAMC,EAAS,GACf,IAAK,MAAMC,KAAsBJ,KAAKC,iBAClC,GAAII,OAAOC,UAAUC,eAAeC,KAAKR,KAAKC,iBAAkBG,GAAqB,CACjF,MAAMK,EAAWT,KAAKC,iBAAiBG,GACnCK,EAASC,aACTP,EAAOQ,KAAKF,EAEhC,CAEQ,OAAON,CACf,CAKI,WAAAS,CAAYC,GACRb,KAAKC,iBAAiBY,EAAeC,OAASD,CACtD,CAKI,cAAAE,CAAeX,UACJJ,KAAKC,iBAAiBG,EACrC,CAOI,6BAAAY,CAA8BZ,EAAoBa,EAASC,GAAS,GAChE,MAAML,EAAiBb,KAAKC,iBAAiBG,GACxCS,GAGLA,EAAeM,eAAeF,EAASC,EAC/C,CAMI,+BAAAE,CAAgChB,EAAoBa,GAChD,MAAMJ,EAAiBb,KAAKC,iBAAiBG,GACxCS,GAGLA,EAAeQ,eAAeJ,EACtC,CAOI,sBAAAK,CAAuBlB,EAAoBmB,EAAkBN,GACzD,MAAMJ,EAAiBb,KAAKC,iBAAiBG,GACxCS,GAGLA,EAAeW,cAAcD,EAAkBN,EACvD,CAOI,uBAAAQ,CAAwBrB,EAAoBmB,EAAkBN,GAC1D,MAAMJ,EAAiBb,KAAKC,iBAAiBG,GACxCS,GAGLA,EAAea,eAAeH,EAAkBN,EACxD,CAII,MAAAU,GACI,IAAK,MAAMvB,KAAsBJ,KAAKC,iBAClC,GAAII,OAAOC,UAAUC,eAAeC,KAAKR,KAAKC,iBAAkBG,GAAqB,CACjF,MAAMK,EAAWT,KAAKC,iBAAiBG,GAClCK,EAASC,YAKVD,EAASmB,WAJTnB,EAASoB,iBACF7B,KAAKC,iBAAiBG,GAKjD,CAEA,CAEI,QAAA0B,GACI,IAAK,MAAM1B,KAAsBJ,KAAKC,iBAClC,GAAII,OAAOC,UAAUC,eAAeC,KAAKR,KAAKC,iBAAkBG,GAAqB,CAChEJ,KAAKC,iBAAiBG,GAC9B0B,UACzB,CAEA,CAII,OAAAD,GACI,IAAK,MAAMzB,KAAsBJ,KAAKC,iBAClC,GAAII,OAAOC,UAAUC,eAAeC,KAAKR,KAAKC,iBAAkBG,GAAqB,CAChEJ,KAAKC,iBAAiBG,GAC9ByB,SACzB,CAEA,EC7HAxB,OAAO0B,eAAeC,EAAM1B,UAAW,mCAAoC,CACvE2B,IAAK,WACD,IAAKjC,KAAKkC,kCAAmC,CAEzC,IAAIC,EAAYnC,KAAKoC,cAAcC,EAAwBC,uCACtDH,IACDA,EAAY,IAAII,EAA+CvC,MAC/DA,KAAKwC,cAAcL,IAEvBnC,KAAKkC,kCAAoC,IAAIpC,CACzD,CACQ,OAAOE,KAAKkC,iCACf,EACDO,YAAY,EACZC,cAAc,IAKX,MAAMH,EAKT,WAAAxC,CAAY4C,GAIR3C,KAAK4C,KAAOP,EAAwBC,sCACpCtC,KAAK2C,MAAQA,CACrB,CAII,QAAAE,GACI7C,KAAK2C,MAAMG,0BAA0BC,aAAaV,EAAwBW,0DAA2DhD,KAAMA,KAAKiD,qBACxJ,CAKI,OAAAC,GACQlD,KAAK2C,MAAMT,mCACXlC,KAAK2C,MAAMT,kCAAkCJ,UAEzD,CAII,OAAAD,GACQ7B,KAAK2C,MAAMT,mCACXlC,KAAK2C,MAAMT,kCAAkCL,SAEzD,CACI,oBAAAoB,GACQjD,KAAK2C,MAAMT,mCACXlC,KAAK2C,MAAMT,kCAAkCP,QAEzD"}