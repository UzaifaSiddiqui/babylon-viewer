import{aj as d,ak as l,a4 as u,a3 as p}from"./index-73dd56e2.js";import{G as h}from"./glTFLoader-f013e480.js";import"./objectModelMapping-97792a33.js";const t="KHR_materials_unlit";class c{constructor(r){this.name=t,this.order=210,this._loader=r,this.enabled=this._loader.isExtensionUsed(t)}dispose(){this._loader=null}loadMaterialPropertiesAsync(r,s,e){return h.LoadExtensionAsync(r,s,this.name,async()=>await this._loadUnlitPropertiesAsync(r,s,e))}_loadUnlitPropertiesAsync(r,s,e){if(!(e instanceof d))throw new Error(`${r}: Material type not supported`);const a=new Array;e.unlit=!0;const o=s.pbrMetallicRoughness;return o&&(o.baseColorFactor?(e.albedoColor=l.FromArray(o.baseColorFactor),e.alpha=o.baseColorFactor[3]):e.albedoColor=l.White(),o.baseColorTexture&&a.push(this._loader.loadTextureInfoAsync(`${r}/baseColorTexture`,o.baseColorTexture,n=>{n.name=`${e.name} (Base Color)`,e.albedoTexture=n}))),s.doubleSided&&(e.backFaceCulling=!1,e.twoSidedLighting=!0),this._loader.loadMaterialAlphaProperties(r,s,e),Promise.all(a).then(()=>{})}}u(t);p(t,!0,i=>new c(i));export{c as KHR_materials_unlit};
