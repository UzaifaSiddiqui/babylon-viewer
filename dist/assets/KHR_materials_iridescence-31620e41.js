import{aj as o,a4 as h,a3 as m}from"./index-07961b59.js";import{G as u}from"./glTFLoader-8110d1ce.js";import"./objectModelMapping-acd55515.js";const r="KHR_materials_iridescence";class a{constructor(i){this.name=r,this.order=195,this._loader=i,this.enabled=this._loader.isExtensionUsed(r)}dispose(){this._loader=null}loadMaterialPropertiesAsync(i,s,e){return u.LoadExtensionAsync(i,s,this.name,async(n,c)=>{const d=new Array;return d.push(this._loader.loadMaterialPropertiesAsync(i,s,e)),d.push(this._loadIridescencePropertiesAsync(n,c,e)),await Promise.all(d).then(()=>{})})}_loadIridescencePropertiesAsync(i,s,e){if(!(e instanceof o))throw new Error(`${i}: Material type not supported`);const n=new Array;return e.iridescence.isEnabled=!0,e.iridescence.intensity=s.iridescenceFactor??0,e.iridescence.indexOfRefraction=s.iridescenceIor??s.iridescenceIOR??1.3,e.iridescence.minimumThickness=s.iridescenceThicknessMinimum??100,e.iridescence.maximumThickness=s.iridescenceThicknessMaximum??400,s.iridescenceTexture&&n.push(this._loader.loadTextureInfoAsync(`${i}/iridescenceTexture`,s.iridescenceTexture,c=>{c.name=`${e.name} (Iridescence)`,e.iridescence.texture=c})),s.iridescenceThicknessTexture&&n.push(this._loader.loadTextureInfoAsync(`${i}/iridescenceThicknessTexture`,s.iridescenceThicknessTexture,c=>{c.name=`${e.name} (Iridescence Thickness)`,e.iridescence.thicknessTexture=c})),Promise.all(n).then(()=>{})}}h(r);m(r,!0,t=>new a(t));export{a as KHR_materials_iridescence};
