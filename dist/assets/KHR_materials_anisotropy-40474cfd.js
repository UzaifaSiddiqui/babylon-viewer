import{aj as p,a4 as d,a3 as y}from"./index-6b43bc24.js";import{G as c}from"./glTFLoader-5bb9d977.js";import"./objectModelMapping-a587b1b7.js";const n="KHR_materials_anisotropy";class u{constructor(r){this.name=n,this.order=195,this._loader=r,this.enabled=this._loader.isExtensionUsed(n)}dispose(){this._loader=null}loadMaterialPropertiesAsync(r,o,s){return c.LoadExtensionAsync(r,o,this.name,async(t,e)=>{const i=new Array;i.push(this._loader.loadMaterialPropertiesAsync(r,o,s)),i.push(this._loadIridescencePropertiesAsync(t,e,s)),await Promise.all(i)})}async _loadIridescencePropertiesAsync(r,o,s){if(!(s instanceof p))throw new Error(`${r}: Material type not supported`);const t=new Array;s.anisotropy.isEnabled=!0,s.anisotropy.intensity=o.anisotropyStrength??0,s.anisotropy.angle=o.anisotropyRotation??0,o.anisotropyTexture&&(o.anisotropyTexture.nonColorData=!0,t.push(this._loader.loadTextureInfoAsync(`${r}/anisotropyTexture`,o.anisotropyTexture,e=>{e.name=`${s.name} (Anisotropy Intensity)`,s.anisotropy.texture=e}))),await Promise.all(t)}}d(n);y(n,!0,a=>new u(a));export{u as KHR_materials_anisotropy};
