import{aj as p,a4 as d,a3 as u}from"./index-07961b59.js";import{G as c}from"./glTFLoader-8110d1ce.js";import"./objectModelMapping-acd55515.js";const o="KHR_materials_dispersion";class l{constructor(r){this.name=o,this.order=174,this._loader=r,this.enabled=this._loader.isExtensionUsed(o)}dispose(){this._loader=null}loadMaterialPropertiesAsync(r,e,s){return c.LoadExtensionAsync(r,e,this.name,async(i,a)=>{const t=new Array;return t.push(this._loader.loadMaterialPropertiesAsync(r,e,s)),t.push(this._loadDispersionPropertiesAsync(i,e,s,a)),await Promise.all(t).then(()=>{})})}_loadDispersionPropertiesAsync(r,e,s,i){if(!(s instanceof p))throw new Error(`${r}: Material type not supported`);return!s.subSurface.isRefractionEnabled||!i.dispersion||(s.subSurface.isDispersionEnabled=!0,s.subSurface.dispersion=i.dispersion),Promise.resolve()}}d(o);u(o,!0,n=>new l(n));export{l as KHR_materials_dispersion};
