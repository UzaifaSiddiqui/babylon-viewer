import{aj as f,at as a,a4 as h,a3 as d}from"./index-e8942d72.js";import{G as _}from"./glTFLoader-b68613f3.js";import"./objectModelMapping-7f92a822.js";const i="EXT_materials_diffuse_roughness";class g{constructor(e){this.name=i,this.order=190,this._loader=e,this.enabled=this._loader.isExtensionUsed(i)}dispose(){this._loader=null}loadMaterialPropertiesAsync(e,r,s){return _.LoadExtensionAsync(e,r,this.name,async(o,n)=>{const u=new Array;return u.push(this._loader.loadMaterialPropertiesAsync(e,r,s)),u.push(this._loadDiffuseRoughnessPropertiesAsync(o,n,s)),await Promise.all(u).then(()=>{})})}_loadDiffuseRoughnessPropertiesAsync(e,r,s){if(!(s instanceof f))throw new Error(`${e}: Material type not supported`);const o=new Array;return s.brdf.baseDiffuseModel=a.MATERIAL_DIFFUSE_MODEL_E_OREN_NAYAR,r.diffuseRoughnessFactor!=null?s.baseDiffuseRoughness=r.diffuseRoughnessFactor:s.baseDiffuseRoughness=0,r.diffuseRoughnessTexture&&o.push(this._loader.loadTextureInfoAsync(`${e}/diffuseRoughnessTexture`,r.diffuseRoughnessTexture,n=>{n.name=`${s.name} (Diffuse Roughness)`,s.baseDiffuseRoughnessTexture=n})),Promise.all(o).then(()=>{})}}h(i);d(i,!0,t=>new g(t));export{g as EXT_materials_diffuse_roughness};
